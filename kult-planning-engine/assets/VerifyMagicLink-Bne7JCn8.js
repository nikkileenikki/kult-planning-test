import{j as e}from"./index-C1JaId44.js";import{u as f,d as y,r as n}from"./vendor-7lAwbL4C.js";import{a as g}from"./utils-B9ygI19o.js";function v(){var o;const[l]=f(),a=y(),[r,i]=n.useState("verifying"),[h,c]=n.useState(""),[s,u]=n.useState(null);return n.useEffect(()=>{(async()=>{var m,x;const d=l.get("token");if(!d){i("error"),c("No verification token found in URL");return}try{const t=await g.get(`/api/auth/verify?token=${d}`);t.data.success&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),u(t.data.user),i("success"),setTimeout(()=>{t.data.user.role==="system_admin"?a("/admin/dashboard"):t.data.user.role==="sales_person"?a("/sales/dashboard"):t.data.user.role==="client_admin"?a("/client/dashboard"):a("/dashboard")},2e3))}catch(t){i("error"),c(((x=(m=t.response)==null?void 0:m.data)==null?void 0:x.error)||"Verification failed. The link may have expired.")}})()},[l,a]),e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0a]",style:{fontFamily:"Inter, sans-serif"},children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`radial-gradient(circle at 20% 50%, rgba(6, 182, 212, 0.1) 0%, transparent 50%),
                           radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.1) 0%, transparent 50%)`}})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 relative z-10",children:[e.jsxs("div",{className:"bg-[#0f1419] border border-gray-800 rounded-2xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:"/kult-logo.png",alt:"KULT",className:"h-12 w-auto",style:{filter:"drop-shadow(0 0 30px rgba(6, 182, 212, 0.4)) drop-shadow(0 0 15px rgba(168, 85, 247, 0.3))"}})}),r==="verifying"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-cyan-900/20 border border-cyan-700 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Verifying Your Link..."}),e.jsx("p",{className:"text-gray-400",children:"Please wait while we verify your magic link."})]}),r==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-green-900/20 border border-green-700 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["Welcome",s!=null&&s.name?`, ${s.name}`:"","! ðŸŽ‰"]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Your account has been verified successfully."}),s&&e.jsx("div",{className:"bg-cyan-900/20 border border-cyan-700 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"text-left space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-white font-medium",children:s.email})]}),s.organization&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Company:"}),e.jsx("span",{className:"text-white font-medium",children:s.organization.name})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Role:"}),e.jsx("span",{className:"text-cyan-400 font-medium capitalize",children:(o=s.role)==null?void 0:o.replace("_"," ")})]})]})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to your dashboard..."})]}),r==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-900/20 border border-red-700 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-400 mb-6",children:h}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>a("/auth"),className:"w-full py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white font-medium rounded-lg transition-all",children:"Request New Link"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Magic links expire after 15 minutes for security."})]})]})]}),r==="error"&&e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Need help? Contact"," ",e.jsx("a",{href:"mailto:support@kult.my",className:"text-cyan-400 hover:text-cyan-300",children:"support@kult.my"})]})})]})]})}export{v as default};
