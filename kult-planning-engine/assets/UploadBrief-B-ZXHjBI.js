import{j as e}from"./index-C1JaId44.js";import{d as F,r as l}from"./vendor-7lAwbL4C.js";import{L as S}from"./Layout-BIIFe71_.js";import{C as I}from"./CampaignBriefPanel-_Oolbo2H.js";import"./utils-B9ygI19o.js";function W(){const c=F(),f=l.useRef(null),[i,d]=l.useState("idle"),[b,x]=l.useState(!1),[m,h]=l.useState(null),[a,p]=l.useState(null),[j,o]=l.useState(null),[C,v]=l.useState({}),N=(t,s)=>{console.log(`ðŸ“ [PANEL EDIT] Updating ${t} to:`,s),v(r=>({...r,[t]:s})),a&&p(r=>({...r,extractedInfo:{...r.extractedInfo,[t]:s}}))},g=t=>{if(!t)return;if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain"].includes(t.type)){o("Please upload a PDF, DOCX, or TXT file");return}const r=10*1024*1024;if(t.size>r){o("File size must be less than 10MB");return}o(null),h(t),d("uploaded"),setTimeout(()=>{w(t)},1e3)},w=async t=>{var s;d("processing"),o(null);try{const r=new FormData;r.append("file",t),console.log("[UPLOAD] Sending file to backend:",t.name);const u=await fetch("/api/brief/parse",{method:"POST",body:r});if(!u.ok){const M=await u.json();throw new Error(M.error||"Failed to process file")}const n=await u.json();console.log("[UPLOAD] Extraction successful:",n);const A={fileName:n.fileName,fileSize:n.fileSize,extractedInfo:n.extractedInfo,metadata:n.metadata};p(A),v(n.extractedInfo),d("processed"),(s=n.metadata)!=null&&s.needsReview&&console.warn("[UPLOAD] Low confidence extraction - user review recommended")}catch(r){console.error("[UPLOAD ERROR]:",r),o(`Failed to process file: ${r.message}`),d("idle"),h(null)}},k=t=>{t.preventDefault(),x(!0)},B=t=>{t.preventDefault(),x(!1)},E=t=>{t.preventDefault(),x(!1);const s=t.dataTransfer.files[0];g(s)},y=t=>{const s=t.target.files[0];g(s)},L=()=>{var t;(t=f.current)==null||t.click()},D=()=>{d("idle"),h(null),p(null),o(null)};return e.jsxs(S,{children:[e.jsx(I,{brief:C,onUpdate:N,isCollapsed:!1}),e.jsxs("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8",style:{marginRight:"320px"},children:[e.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[e.jsxs("button",{onClick:()=>c("/dashboard"),className:"flex items-center text-[#94A3B8] hover:text-white transition-colors mb-4",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-white mb-2",children:["Upload Your ",e.jsx("span",{className:"sharp-gradient-text",children:"Brief"})]}),e.jsx("p",{className:"text-[#94A3B8]",children:"Upload your campaign brief document and we'll help you build a strategic media plan"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[(i==="idle"||i==="uploaded")&&e.jsx("div",{className:"kult-card",children:e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-12 text-center transition-all ${b?"border-[#00E5CC] bg-[#00E5CC]/10":"border-[#1E293B] hover:border-[#00E5CC]/50"}`,onDragOver:k,onDragLeave:B,onDrop:E,children:[e.jsx("input",{ref:f,type:"file",className:"hidden",accept:".pdf,.docx,.doc,.txt",onChange:y}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#00E5CC]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#00E5CC]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Drop your brief here or click to browse"}),e.jsx("p",{className:"text-[#94A3B8] text-sm",children:"Supports PDF, DOCX, DOC, or TXT files (max 10MB)"})]}),e.jsx("button",{onClick:L,className:"kult-btn-primary",children:"Choose File"}),m&&i==="uploaded"&&e.jsxs("div",{className:"mt-4 flex items-center space-x-3 text-sm",children:[e.jsx("svg",{className:"w-5 h-5 text-[#00E5CC]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-white",children:m.name}),e.jsxs("span",{className:"text-[#94A3B8]",children:["(",(m.size/1024).toFixed(2)," KB)"]})]}),j&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-red-400",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:j})]})]})]})}),i==="processing"&&e.jsx("div",{className:"kult-card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#00E5CC]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#00E5CC]"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Processing your brief..."}),e.jsx("p",{className:"text-[#94A3B8]",children:"Extracting campaign information and analyzing requirements"})]})}),i==="processed"&&a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"kult-card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Brief Summary"}),e.jsxs("p",{className:"text-[#94A3B8] text-sm mb-2",children:["Extracted from: ",a.fileName]}),a.metadata&&e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-[#94A3B8]",children:"Confidence:"}),e.jsxs("span",{className:`font-semibold ${a.metadata.overallConfidence>=.8?"text-[#00E5CC]":a.metadata.overallConfidence>=.6?"text-yellow-400":"text-[#FF0080]"}`,children:[(a.metadata.overallConfidence*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-[#94A3B8]",children:"Method:"}),e.jsx("span",{className:"text-[#00E5CC] font-mono",children:a.metadata.extractionMethod})]}),a.metadata.needsReview&&e.jsxs("div",{className:"flex items-center space-x-1 text-[#FF0080]",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-semibold",children:"Review Recommended"})]})]})]}),e.jsx("button",{onClick:D,className:"text-[#94A3B8] hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.extractedInfo).filter(([t])=>!t.startsWith("_")&&t!=="confidence").map(([t,s])=>{if(s==null)return null;const r=typeof s=="object"?JSON.stringify(s):String(s);return e.jsxs("div",{className:"bg-[#0F1420] rounded-lg p-4 border border-[#1E293B]",children:[e.jsx("div",{className:"text-xs text-[#94A3B8] uppercase tracking-wider mb-1",children:t.replace(/([A-Z_])/g," $1").trim().replace(/\s+/g," ")}),e.jsx("div",{className:"text-white font-medium",children:r})]},t)}).filter(Boolean)})]}),e.jsxs("div",{className:"kult-card",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What would you like to do next?"}),e.jsx("p",{className:"text-[#94A3B8] mb-6",children:"Choose how you'd like to build your media plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("button",{onClick:()=>c("/ai-wizard",{state:{briefData:a.extractedInfo}}),className:"group relative bg-gradient-to-br from-[#00E5CC]/20 to-[#00E5CC]/5 border-2 border-[#00E5CC] rounded-xl p-6 text-left hover:from-[#00E5CC]/30 hover:to-[#00E5CC]/10 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-[#00E5CC]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-[#00E5CC]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("div",{className:"px-3 py-1 bg-[#00E5CC]/20 text-[#00E5CC] text-xs font-semibold rounded-full",children:"RECOMMENDED"})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-[#00E5CC] transition-colors",children:"AI Campaign Wizard"}),e.jsx("p",{className:"text-[#94A3B8] text-sm mb-4",children:"Let AI guide you through a conversational planning process. Perfect for refining details and exploring options."}),e.jsxs("div",{className:"flex items-center text-[#00E5CC] text-sm font-medium",children:[e.jsx("span",{children:"Start AI Planning"}),e.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("button",{onClick:()=>c("/build-plan",{state:{briefData:a.extractedInfo}}),className:"group relative bg-[#1A1F35] border-2 border-[#1E293B] rounded-xl p-6 text-left hover:border-[#00E5CC]/50 hover:bg-[#1A1F35]/80 transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-[#94A3B8]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-[#94A3B8]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-[#00E5CC] transition-colors",children:"Build Plan Manually"}),e.jsx("p",{className:"text-[#94A3B8] text-sm mb-4",children:"Use the traditional planning interface with full control over every detail. Best for experienced planners."}),e.jsxs("div",{className:"flex items-center text-[#94A3B8] group-hover:text-[#00E5CC] text-sm font-medium transition-colors",children:[e.jsx("span",{children:"Go to Planner"}),e.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})]})]})}export{W as default};
