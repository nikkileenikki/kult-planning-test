import{j as e}from"./index-C1JaId44.js";import{d as M,r as s}from"./vendor-7lAwbL4C.js";import{L}from"./Layout-BIIFe71_.js";import"./utils-B9ygI19o.js";function E(){M();const[C,v]=s.useState(!1),[h,S]=s.useState(""),[i,N]=s.useState(null),[g,f]=s.useState([]),[m,b]=s.useState([]),[p,y]=s.useState([]),[x,j]=s.useState([]),[o,d]=s.useState({name:"",description:"",targeting_type:"",criteria:"",premium_multiplier:1});s.useEffect(()=>{(()=>{try{const t=JSON.parse(localStorage.getItem("geographicTargeting")||"[]"),r=JSON.parse(localStorage.getItem("contextualTargeting")||"[]"),l=JSON.parse(localStorage.getItem("deviceTargeting")||"[]"),c=JSON.parse(localStorage.getItem("timeOfDayTargeting")||"[]");f(t),b(r),y(l),j(c)}catch(t){console.error("Error loading targeting data:",t)}})()},[]),s.useEffect(()=>{localStorage.setItem("geographicTargeting",JSON.stringify(g))},[g]),s.useEffect(()=>{localStorage.setItem("contextualTargeting",JSON.stringify(m))},[m]),s.useEffect(()=>{localStorage.setItem("deviceTargeting",JSON.stringify(p))},[p]),s.useEffect(()=>{localStorage.setItem("timeOfDayTargeting",JSON.stringify(x))},[x]);const w=(a,t=null)=>{S(a),N(t),d(t?{name:t.name||"",description:t.description||"",targeting_type:t.targeting_type||"",criteria:t.criteria||"",premium_multiplier:t.premium_multiplier||1}:{name:"",description:"",targeting_type:a,criteria:"",premium_multiplier:1}),v(!0)},k=()=>{v(!1),N(null),d({name:"",description:"",targeting_type:"",criteria:"",premium_multiplier:1})},T=a=>{a.preventDefault();const t={id:(i==null?void 0:i.id)||Date.now(),...o,created_at:(i==null?void 0:i.created_at)||new Date().toISOString()},r=l=>i?l.map(c=>c.id===i.id?t:c):[...l,t];switch(h){case"geographic":f(r(g));break;case"contextual":b(r(m));break;case"device":y(r(p));break;case"timeofday":j(r(x));break}k()},D=(a,t)=>{if(window.confirm("Are you sure you want to delete this targeting option?"))switch(a){case"geographic":f(g.filter(r=>r.id!==t));break;case"contextual":b(m.filter(r=>r.id!==t));break;case"device":y(p.filter(r=>r.id!==t));break;case"timeofday":j(x.filter(r=>r.id!==t));break}},u=({title:a,description:t,items:r,type:l,icon:c})=>e.jsxs("div",{className:"bg-[#111] border border-gray-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${c.bgColor} mr-3`,children:e.jsx("svg",{className:`w-6 h-6 ${c.textColor}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:c.path})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white uppercase",style:{fontFamily:"Inter, sans-serif"},children:a}),e.jsx("p",{className:"text-sm text-gray-400",children:t})]})]}),e.jsxs("button",{onClick:()=>w(l),className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-purple-600 text-white font-semibold rounded-lg hover:from-cyan-600 hover:to-purple-700 transition-all",children:["Add ",a]})]}),r.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsxs("p",{children:["No ",a.toLowerCase()," options configured"]})}):e.jsx("div",{className:"space-y-3",children:r.map(n=>e.jsx("div",{className:"bg-[#0a0a0a] border border-gray-800 rounded-lg p-4 hover:border-gray-700 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white",children:n.name}),n.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n.description}),n.criteria&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("span",{className:"font-medium text-cyan-400",children:"Criteria:"})," ",n.criteria]}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsxs("span",{className:"text-xs font-medium text-cyan-400",children:["Multiplier: ",n.premium_multiplier,"x"]}),e.jsx("span",{className:"text-xs text-gray-600",children:new Date(n.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>w(l,n),className:"p-2 text-cyan-400 hover:bg-cyan-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>D(l,n.id),className:"p-2 text-red-400 hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},n.id))})]});return e.jsx(L,{children:e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a]",children:[e.jsx("div",{className:"border-b border-gray-800 bg-[#0f0f0f] px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-cyan-400 font-black mb-2 tracking-wider uppercase",style:{fontFamily:"Inter, sans-serif"},children:"[ ADMIN / TARGETING ]"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white uppercase",style:{fontFamily:"Inter, sans-serif"},children:"Targeting Configuration"}),e.jsx("p",{className:"text-gray-400 mt-1 text-sm sm:text-base",children:"Manage geographic, contextual, device, and time-of-day targeting options"})]})})}),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(u,{title:"Geographic Targeting",description:"Location-based targeting options",items:g,type:"geographic",icon:{bgColor:"bg-cyan-900/30",textColor:"text-cyan-400",path:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"}}),e.jsx(u,{title:"Contextual Targeting",description:"Content-based targeting options",items:m,type:"contextual",icon:{bgColor:"bg-purple-900/30",textColor:"text-purple-400",path:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"}}),e.jsx(u,{title:"Device Targeting",description:"Device and platform targeting",items:p,type:"device",icon:{bgColor:"bg-pink-900/30",textColor:"text-pink-400",path:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"}}),e.jsx(u,{title:"Time-of-Day Targeting",description:"Temporal targeting options",items:x,type:"timeofday",icon:{bgColor:"bg-orange-900/30",textColor:"text-orange-400",path:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}})]})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-[#0f0f0f] border border-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-800",children:e.jsxs("h2",{className:"text-xl font-black text-white uppercase",style:{fontFamily:"Inter, sans-serif"},children:[i?"Edit":"Add"," ",h.charAt(0).toUpperCase()+h.slice(1)," Targeting"]})}),e.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name *"}),e.jsx("input",{type:"text",required:!0,value:o.name,onChange:a=>d({...o,name:a.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500",placeholder:"e.g., Major Cities, Mobile Devices"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:o.description,onChange:a=>d({...o,description:a.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500",rows:"3",placeholder:"Describe this targeting option..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Criteria"}),e.jsx("input",{type:"text",value:o.criteria,onChange:a=>d({...o,criteria:a.target.value}),className:"w-full px-3 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500",placeholder:"e.g., Kuala Lumpur, Selangor, Penang"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Premium Multiplier"}),e.jsx("input",{type:"number",step:"0.1",min:"0.1",max:"5",value:o.premium_multiplier,onChange:a=>d({...o,premium_multiplier:parseFloat(a.target.value)}),className:"w-full px-3 py-2 bg-[#1a1a1a] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CPM multiplier for this targeting option (1.0 = no change)"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-700 text-gray-300 rounded-lg hover:bg-[#1a1a1a] transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-purple-600 text-white font-semibold rounded-lg hover:from-cyan-600 hover:to-purple-700 transition-all",children:i?"Update":"Add"})]})]})]})})]})})}export{E as default};
