const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-OOmGtMYK.js","assets/index-C1JaId44.js","assets/vendor-7lAwbL4C.js","assets/utils-B9ygI19o.js","assets/index-CT4BLVog.css"])))=>i.map(i=>d[i]);
import{j as e,_ as xe}from"./index-C1JaId44.js";import{r as F}from"./vendor-7lAwbL4C.js";import{a as he}from"./utils-B9ygI19o.js";import{L as ke}from"./Layout-BIIFe71_.js";function qe(){const[ae,K]=F.useState(!0),[me,ee]=F.useState(!0),[te,se]=F.useState(!1),[U,ue]=F.useState([]),[Fe,pe]=F.useState(null),[Re,ge]=F.useState([]),[ne,oe]=F.useState(null),[l,q]=F.useState({property:[],ip:[],format:[],device:[],month:[]}),[A,B]=F.useState(null),[Q,re]=F.useState(""),[L,H]=F.useState({key:"ip",direction:"asc"}),[I,le]=F.useState({visible:!1,x:0,y:0,data:null}),[D,ie]=F.useState({visible:!1,x:0,y:0,data:null}),[P,O]=F.useState(1),[_,fe]=F.useState(20),ye="https://docs.google.com/spreadsheets/d/1FCBX0EDhPmPSe4-AjbuwxoDQwkLGuyBd8IrLYbnQ4xM/edit?gid=0#gid=0";F.useEffect(()=>{ce()},[]),F.useEffect(()=>{O(1)},[l]),F.useEffect(()=>{const t=n=>{A&&!n.target.closest(".relative")&&B(null)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[A]);const ce=async(t=!1)=>{var n,s;try{K(!0),ee(!0),oe(null);const o=t?"/api/inventory?skipCache=true":"/api/inventory",i=await he.get(o);if(i.data.success){const r=i.data.data||[];ue(r),ge(i.data.headers||[]),pe(i.data.stats||{}),K(!1),setTimeout(()=>{ee(!1)},100)}else throw new Error("Failed to fetch inventory data")}catch(o){console.error("Error fetching inventory:",o),oe(((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.error)||"Failed to load inventory data. Please try again."),K(!1),ee(!1)}finally{se(!1)}},ve=async()=>{se(!0);try{await he.post("/api/inventory/refresh"),await ce(!0)}catch(t){console.error("Error refreshing inventory:",t),se(!1)}},$=t=>t?t>=1e9?(t/1e9).toFixed(1)+"B":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toLocaleString():"0",be=t=>U.length?[...new Set(U.map(s=>s[t]).filter(s=>s))].sort():[],G=(t,n)=>{q(s=>{const o=s[t],i=o.includes(n)?o.filter(r=>r!==n):[...o,n];return t==="property"?{property:i,ip:[],format:[],device:[],month:[]}:t==="ip"?{...s,ip:i,format:[],device:[],month:[]}:t==="format"?{...s,format:i,device:[],month:[]}:t==="device"?{...s,device:i,month:[]}:{...s,[t]:i}})},Y=(t,n)=>{const s=z(n);q(o=>t==="property"?{property:s,ip:[],format:[],device:[],month:[]}:t==="ip"?{...o,ip:s,format:[],device:[],month:[]}:t==="format"?{...o,format:s,device:[],month:[]}:t==="device"?{...o,device:s,month:[]}:{...o,[t]:s})},z=t=>{if(!U.length)return[];let n=U;t!=="Property"&&l.property.length>0&&(n=n.filter(o=>l.property.includes(o.Property))),t!=="IP"&&l.ip.length>0&&(n=n.filter(o=>l.ip.includes(o.IP))),t!=="Format"&&l.format.length>0&&(n=n.filter(o=>l.format.includes(o.Format))),t!=="Device category"&&l.device.length>0&&(n=n.filter(o=>l.device.includes(o["Device category"]))),t!=="Month and year"&&l.month.length>0&&(n=n.filter(o=>l.month.includes(o["Month and year"])));const s=[...new Set(n.map(o=>o[t]).filter(o=>o))];if(t==="Month and year"){const o=["January","February","March","April","May","June","July","August","September","October","November","December"];return s.sort((i,r)=>{const c=o.indexOf(i),d=o.indexOf(r);return c-d})}return s.sort()},C=U.filter(t=>!(l.property.length>0&&!l.property.includes(t.Property)||l.ip.length>0&&!l.ip.includes(t.IP)||l.format.length>0&&!l.format.includes(t.Format)||l.device.length>0&&!l.device.includes(t["Device category"])||l.month.length>0&&!l.month.includes(t["Month and year"]))),T=(()=>{if(!C.length)return{avgAdRequests:0,avgImpressions:0,avgFillRate:0};const t={};C.forEach(c=>{const d=c["Month and year"]||"Unknown";t[d]||(t[d]={adRequests:0,impressions:0}),t[d].adRequests+=c["Total ad requests"]||0,t[d].impressions+=c["Total impressions"]||0});const n=Object.values(t);if(n.length===0)return{avgAdRequests:0,avgImpressions:0,avgFillRate:0};const s=n.reduce((c,d)=>c+d.adRequests,0),o=n.reduce((c,d)=>c+d.impressions,0),i=s/n.length,r=o/n.length;return{avgAdRequests:Math.round(i),avgImpressions:Math.round(r),avgFillRate:s>0?(o/s*100).toFixed(1):0}})(),de=C.reduce((t,n)=>{const s=n["Month and year"]||"Unknown";return t[s]||(t[s]={month:s,adRequests:0,impressions:0,count:0}),t[s].adRequests+=n["Total ad requests"]||0,t[s].impressions+=n["Total impressions"]||0,t[s].count+=1,t},{});Object.values(de).forEach(t=>{t.fillRate=t.adRequests>0?(t.impressions/t.adRequests*100).toFixed(1):0});const E=Object.values(de).sort((t,n)=>{const s=["January","February","March","April","May","June","July","August","September","October","November","December"];return s.indexOf(t.month)-s.indexOf(n.month)}),je=C.reduce((t,n)=>{const s=n["Device category"]||"Unknown";return t[s]||(t[s]={device:s,adRequests:0,impressions:0}),t[s].adRequests+=n["Total ad requests"]||0,t[s].impressions+=n["Total impressions"]||0,t},{}),Z=Object.values(je).sort((t,n)=>n.adRequests-t.adRequests),V=["#3B82F6","#FB923C","#FF0080","#10B981","#F97316","#A855F7"],we=()=>{const t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=l.month.length>0?l.month.sort((m,u)=>t.indexOf(m)-t.indexOf(u)):t,s=[];C.forEach(m=>{const u=m["Month and year"]||"Unknown";if(n.includes(u)){const b=m["Total ad requests"]||0,N=m["Total impressions"]||0,y=b>0?(N/b*100).toFixed(1):"0.0";s.push({ip:m.IP||"Unknown",device:m["Device category"]||"Unknown",month:u,adRequests:b,impressions:N,fillRate:y})}});const i=[["IP","Device","Month","Ad Requests","Impressions","Fill Rate (%)"].join(","),...s.map(m=>[`"${m.ip}"`,`"${m.device}"`,`"${m.month}"`,m.adRequests,m.impressions,m.fillRate].join(","))].join(`
`),r=new Blob([i],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),d=URL.createObjectURL(r);c.setAttribute("href",d),c.setAttribute("download",`KULT_Inventory_Export_${new Date().toISOString().split("T")[0]}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},Ne=async()=>{const t=(await xe(async()=>{const{default:x}=await import("./html2canvas.esm-CBrSDip1.js");return{default:x}},[])).default,n=(await xe(async()=>{const{default:x}=await import("./jspdf.es.min-OOmGtMYK.js").then(g=>g.j);return{default:x}},__vite__mapDeps([0,1,2,3,4]))).default,s=new n("p","mm","a4"),o=s.internal.pageSize.getWidth(),i=s.internal.pageSize.getHeight();let r=10;s.setFillColor(255,255,255),s.rect(0,0,o,i,"F"),s.setTextColor(0,0,0),s.setFontSize(18),s.setFont(void 0,"bold"),s.text("Property Inventory Report",15,r),s.setFontSize(8),s.setFont(void 0,"normal");const c=new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",","");s.text(`Generated: ${c}`,15,r+5);try{const x=await fetch("/kult-logo.png").then(R=>R.blob()),g=await new Promise(R=>{const f=new FileReader;f.onloadend=()=>R(f.result),f.readAsDataURL(x)}),a=document.createElement("canvas"),p=a.getContext("2d"),h=new Image;await new Promise(R=>{h.onload=()=>{a.width=h.width,a.height=h.height,p.drawImage(h,0,0);const f=p.getImageData(0,0,a.width,a.height),k=f.data;for(let v=0;v<k.length;v+=4)k[v]>200&&k[v+1]>200&&k[v+2]>200&&(k[v]=0,k[v+1]=0,k[v+2]=0);p.putImageData(f,0,0),R()},h.src=g});const w=a.toDataURL("image/png");s.addImage(w,"PNG",o-45,r-2,30,10)}catch(x){console.error("Error loading logo:",x),s.setFontSize(20),s.setFont(void 0,"bold"),s.text("KULT",o-30,r+5)}r+=12,s.setFontSize(9),s.setFont(void 0,"bold"),s.text("Filters:",15,r),r+=4,s.setFontSize(7),s.setFont(void 0,"normal");const d=[];l.property.length>0&&d.push(`Property: ${l.property.slice(0,3).join(", ")}${l.property.length>3?"...":""}`),l.ip.length>0&&d.push(`IP: ${l.ip.slice(0,3).join(", ")}${l.ip.length>3?"...":""}`),l.format.length>0&&d.push(`Format: ${l.format.join(", ")}`),l.device.length>0&&d.push(`Device: ${l.device.join(", ")}`),l.month.length>0&&d.push(`Month: ${l.month.join(", ")}`),d.length===0?(s.text("All data (no filters)",15,r),r+=4):d.forEach(x=>{s.text(x,15,r),r+=4}),r+=4,s.setFontSize(9),s.setFont(void 0,"bold"),s.text("Summary:",15,r),r+=4,s.setFontSize(7),s.setFont(void 0,"normal");const m=15,u=o/2+5;s.text(`Avg. Ad Requests: ${$(T.avgAdRequests)}`,m,r),s.text(`Avg. Impressions: ${$(T.avgImpressions)}`,u,r),r+=4,s.text(`Avg Fill Rate: ${T.avgFillRate}%`,m,r),s.text(`Available IPs: ${[...new Set(C.map(x=>x.IP).filter(x=>x))].length}`,u,r),r+=8;const b=document.getElementById("charts-section");if(b){const x=await t(b,{scale:1.5,backgroundColor:"#FFFFFF",logging:!1,onclone:h=>{const w=h.getElementById("charts-section");w&&(w.style.backgroundColor="#FFFFFF",w.querySelectorAll("div").forEach(v=>{v.style.backgroundColor="#FFFFFF"}),w.querySelectorAll("text, tspan, div, span, h3, p").forEach(v=>{v.style.color="#000000",v.style.fill="#000000"}),w.querySelectorAll("svg").forEach(v=>{v.querySelectorAll("path, line, polyline, circle, rect").forEach(S=>{const M=S.getAttribute("stroke");M&&M!=="none"&&(M.includes("#3B82F6")||M.includes("59, 130, 246")?S.setAttribute("stroke","#1E40AF"):M.includes("#10B981")||M.includes("16, 185, 129")?S.setAttribute("stroke","#047857"):M.includes("#FF0080")||M.includes("255, 0, 128")?S.setAttribute("stroke","#BE185D"):M.includes("#06B6D4")||M.includes("6, 182, 212")?S.setAttribute("stroke","#0E7490"):(M.includes("#")||M.includes("rgb"))&&S.setAttribute("stroke","#374151"));const X=S.getAttribute("fill");X&&X!=="none"&&X!=="transparent"&&(X.includes("url(")||S.setAttribute("fill",X))}),v.querySelectorAll("text, tspan").forEach(S=>{S.setAttribute("fill","#000000"),S.style.fill="#000000"})}))}}),g=x.toDataURL("image/png"),a=o-30,p=x.height*a/x.width;r+p>i-20&&(s.addPage(),r=15,s.setFillColor(255,255,255),s.rect(0,0,o,i,"F"),s.setTextColor(0,0,0)),s.addImage(g,"PNG",15,r,a,p),r+=p+8}r>i-80&&(s.addPage(),r=15,s.setFillColor(255,255,255),s.rect(0,0,o,i,"F"),s.setTextColor(0,0,0)),s.setFontSize(11),s.setFont(void 0,"bold"),s.text("Detailed Inventory",15,r),r+=6;const N={};C.forEach(x=>{const g=`${x.IP||"Unknown"}_${x["Device category"]||"Unknown"}`;N[g]||(N[g]={ip:x.IP||"Unknown",device:x["Device category"]||"Unknown",monthlyData:{}});const a=x["Month and year"]||"Unknown";N[g].monthlyData[a]||(N[g].monthlyData[a]={adRequests:0,impressions:0}),N[g].monthlyData[a].adRequests+=x["Total ad requests"]||0,N[g].monthlyData[a].impressions+=x["Total impressions"]||0});const y=Object.values(N).map(x=>{const g=Object.values(x.monthlyData);if(g.length===0)return{ip:x.ip,device:x.device,avgAdRequests:0,avgImpressions:0,fillRate:0};const a=Math.min(...g.map(f=>f.adRequests)),p=Math.min(...g.map(f=>f.impressions)),h=g.reduce((f,k)=>f+k.adRequests,0),w=g.reduce((f,k)=>f+k.impressions,0),R=h>0?(w/h*100).toFixed(1):0;return{ip:x.ip,device:x.device,avgAdRequests:Math.round(a),avgImpressions:Math.round(p),fillRate:R}});s.setFontSize(7),s.setFont(void 0,"bold"),s.setFillColor(240,240,240),s.rect(14,r-3,o-28,5,"F");const j=[15,70,110,145,175];s.text("IP",j[0],r),s.text("Device",j[1],r),s.text("Ad Requests",j[2],r),s.text("Impressions",j[3],r),s.text("Fill Rate",j[4],r),r+=4,s.setFont(void 0,"normal"),s.setFontSize(6);const W=Math.min(y.length,30);y.slice(0,W).forEach((x,g)=>{g%2===0&&(s.setFillColor(250,250,250),s.rect(14,r-3,o-28,4,"F")),s.text(x.ip.substring(0,35),j[0],r),s.text(x.device.substring(0,20),j[1],r),s.text(x.avgAdRequests.toLocaleString(),j[2],r),s.text(x.avgImpressions.toLocaleString(),j[3],r),s.text(`${x.fillRate}%`,j[4],r),r+=4}),y.length>W&&(r+=2,s.setFontSize(6),s.setFont(void 0,"italic"),s.text(`Showing ${W} of ${y.length} rows. Download Excel for complete data.`,15,r)),s.save(`KULT_Inventory_Report_${new Date().toISOString().split("T")[0]}.pdf`)};return e.jsx(ke,{children:e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a]",children:[e.jsx("div",{className:"border-b border-gray-800 bg-[#0f0f0f] px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-cyan-400 font-black mb-2 tracking-wider uppercase",style:{fontFamily:"Inter, sans-serif"},children:"[ ADMIN / INVENTORY MANAGEMENT ]"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-white uppercase",style:{fontFamily:"Inter, sans-serif"},children:"Property Inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto",children:[e.jsxs("a",{href:ye,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-[#2d3748] text-white rounded-md hover:bg-[#3d4758] transition-colors flex items-center text-sm font-medium",children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),e.jsx("span",{children:"Edit Source"})]}),e.jsxs("button",{onClick:ve,disabled:te,className:"px-4 py-2 bg-[#0891b2] text-white font-medium rounded-md hover:bg-[#0e7490] disabled:opacity-50 transition-all flex items-center text-sm",children:[e.jsx("svg",{className:`w-4 h-4 mr-2 ${te?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:te?"Refreshing...":"Refresh Data"})]})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6",children:[ne&&e.jsxs("div",{className:"bg-red-900/20 border border-red-800 text-red-300 px-4 py-3 rounded-lg flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:ne})]}),e.jsxs("div",{className:"bg-[#0f1419] border border-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",style:{fontFamily:"Inter, sans-serif"},children:"Global Filters"})]}),e.jsx("button",{onClick:()=>q({property:[],ip:[],format:[],device:[],month:[]}),className:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors font-medium",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 font-medium",style:{fontFamily:"Inter, sans-serif"},children:"Property"}),e.jsxs("button",{onClick:()=>B(A==="property"?null:"property"),className:"w-full px-3 py-2 bg-[#0a0a0a] border border-gray-700 rounded text-sm text-white text-left focus:outline-none focus:border-cyan-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:l.property.length>0?`${l.property.length} selected`:"Select..."}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A==="property"&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-[#0a0a0a] border border-gray-700 rounded shadow-lg max-h-60 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0a0a0a] border-b border-gray-700 p-2 flex justify-between",children:[e.jsx("button",{onClick:()=>Y("property","Property"),className:"text-xs text-cyan-400 hover:text-cyan-300 font-medium",children:"Select All"}),e.jsx("button",{onClick:()=>q(t=>({...t,property:[]})),className:"text-xs text-red-400 hover:text-red-300 font-medium",children:"Clear"})]}),e.jsx("div",{className:"p-2",children:be("Property").map(t=>e.jsxs("label",{className:"flex items-center space-x-2 py-1.5 px-2 hover:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.property.includes(t),onChange:()=>G("property",t),className:"w-4 h-4 text-cyan-500 border-gray-600 rounded focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:t})]},t))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 font-medium",style:{fontFamily:"Inter, sans-serif"},children:"IP"}),e.jsxs("button",{onClick:()=>{A==="ip"?(B(null),re("")):(B("ip"),re(""))},className:"w-full px-3 py-2 bg-[#0a0a0a] border border-gray-700 rounded text-sm text-white text-left focus:outline-none focus:border-cyan-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:l.ip.length>0?`${l.ip.length} selected`:"Select..."}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A==="ip"&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-[#0a0a0a] border border-gray-700 rounded shadow-lg",children:[e.jsx("div",{className:"sticky top-0 bg-[#0a0a0a] border-b border-gray-700 p-2",children:e.jsx("input",{type:"text",placeholder:"Search IPs...",value:Q,onChange:t=>re(t.target.value),className:"w-full px-3 py-1.5 bg-[#161b22] border border-gray-600 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-cyan-500",autoFocus:!0})}),e.jsxs("div",{className:"sticky top-[52px] bg-[#0a0a0a] border-b border-gray-700 p-2 flex justify-between",children:[e.jsx("button",{onClick:()=>{const t=z("IP").filter(n=>n.toLowerCase().includes(Q.toLowerCase()));q(n=>({...n,ip:[...new Set([...n.ip,...t])],format:[],device:[],month:[]}))},className:"text-xs text-cyan-400 hover:text-cyan-300 font-medium",children:"Select All"}),e.jsx("button",{onClick:()=>q(t=>({...t,ip:[]})),className:"text-xs text-red-400 hover:text-red-300 font-medium",children:"Clear"})]}),e.jsxs("div",{className:"p-2 max-h-60 overflow-y-auto",children:[z("IP").filter(t=>t.toLowerCase().includes(Q.toLowerCase())).map(t=>e.jsxs("label",{className:"flex items-center space-x-2 py-1.5 px-2 hover:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.ip.includes(t),onChange:()=>G("ip",t),className:"w-4 h-4 text-cyan-500 border-gray-600 rounded focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:t})]},t)),z("IP").filter(t=>t.toLowerCase().includes(Q.toLowerCase())).length===0&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No IPs found"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 font-medium",style:{fontFamily:"Inter, sans-serif"},children:"Format"}),e.jsxs("button",{onClick:()=>B(A==="format"?null:"format"),className:"w-full px-3 py-2 bg-[#0a0a0a] border border-gray-700 rounded text-sm text-white text-left focus:outline-none focus:border-cyan-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:l.format.length>0?`${l.format.length} selected`:"Select..."}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A==="format"&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-[#0a0a0a] border border-gray-700 rounded shadow-lg max-h-60 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0a0a0a] border-b border-gray-700 p-2 flex justify-between",children:[e.jsx("button",{onClick:()=>Y("format","Format"),className:"text-xs text-cyan-400 hover:text-cyan-300 font-medium",children:"Select All"}),e.jsx("button",{onClick:()=>q(t=>({...t,format:[]})),className:"text-xs text-red-400 hover:text-red-300 font-medium",children:"Clear"})]}),e.jsx("div",{className:"p-2",children:z("Format").map(t=>e.jsxs("label",{className:"flex items-center space-x-2 py-1.5 px-2 hover:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.format.includes(t),onChange:()=>G("format",t),className:"w-4 h-4 text-cyan-500 border-gray-600 rounded focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:t})]},t))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 font-medium",style:{fontFamily:"Inter, sans-serif"},children:"Device"}),e.jsxs("button",{onClick:()=>B(A==="device"?null:"device"),className:"w-full px-3 py-2 bg-[#0a0a0a] border border-gray-700 rounded text-sm text-white text-left focus:outline-none focus:border-cyan-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:l.device.length>0?`${l.device.length} selected`:"Select..."}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A==="device"&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-[#0a0a0a] border border-gray-700 rounded shadow-lg max-h-60 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0a0a0a] border-b border-gray-700 p-2 flex justify-between",children:[e.jsx("button",{onClick:()=>Y("device","Device category"),className:"text-xs text-cyan-400 hover:text-cyan-300 font-medium",children:"Select All"}),e.jsx("button",{onClick:()=>q(t=>({...t,device:[]})),className:"text-xs text-red-400 hover:text-red-300 font-medium",children:"Clear"})]}),e.jsx("div",{className:"p-2",children:z("Device category").map(t=>e.jsxs("label",{className:"flex items-center space-x-2 py-1.5 px-2 hover:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.device.includes(t),onChange:()=>G("device",t),className:"w-4 h-4 text-cyan-500 border-gray-600 rounded focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:t})]},t))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1.5 font-medium",style:{fontFamily:"Inter, sans-serif"},children:"Month"}),e.jsxs("button",{onClick:()=>B(A==="month"?null:"month"),className:"w-full px-3 py-2 bg-[#0a0a0a] border border-gray-700 rounded text-sm text-white text-left focus:outline-none focus:border-cyan-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:l.month.length>0?`${l.month.length} selected`:"Select..."}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A==="month"&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-[#0a0a0a] border border-gray-700 rounded shadow-lg max-h-60 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0a0a0a] border-b border-gray-700 p-2 flex justify-between",children:[e.jsx("button",{onClick:()=>Y("month","Month and year"),className:"text-xs text-cyan-400 hover:text-cyan-300 font-medium",children:"Select All"}),e.jsx("button",{onClick:()=>q(t=>({...t,month:[]})),className:"text-xs text-red-400 hover:text-red-300 font-medium",children:"Clear"})]}),e.jsx("div",{className:"p-2",children:z("Month and year").map(t=>e.jsxs("label",{className:"flex items-center space-x-2 py-1.5 px-2 hover:bg-gray-800 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.month.includes(t),onChange:()=>G("month",t),className:"w-4 h-4 text-cyan-500 border-gray-600 rounded focus:ring-cyan-500"}),e.jsx("span",{className:"text-sm text-white",children:t})]},t))})]})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",style:{fontFamily:"Inter, sans-serif"},children:"Property"})}),ae?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-8 bg-gray-700 rounded w-1/2"})]},t))}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5",children:[e.jsx("div",{className:"text-xs mb-2 font-medium",style:{fontFamily:"Inter, sans-serif",color:"#3B82F6"},children:"Avg. Monthly Ad Requests"}),e.jsx("div",{className:"text-3xl font-black text-white",children:$(T.avgAdRequests)})]}),e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5",children:[e.jsx("div",{className:"text-xs mb-2 font-medium",style:{fontFamily:"Inter, sans-serif",color:"#10B981"},children:"Avg. Monthly Imp. Served"}),e.jsx("div",{className:"text-3xl font-black text-white",children:$(T.avgImpressions)})]}),e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5",children:[e.jsx("div",{className:"text-xs mb-2 font-medium",style:{fontFamily:"Inter, sans-serif",color:"#FF0080"},children:"Avg Fill Rate"}),e.jsxs("div",{className:"text-3xl font-black text-white",children:[T.avgFillRate,"%"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"(Impressions / Requests)"})]}),e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5",children:[e.jsx("div",{className:"text-xs mb-2 font-medium",style:{fontFamily:"Inter, sans-serif",color:"#F97316"},children:"Available IPs"}),e.jsx("div",{className:"text-3xl font-black text-white",children:[...new Set(C.map(t=>t.IP).filter(t=>t))].length})]})]}),ae?e.jsxs("div",{id:"charts-section",className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5 lg:col-span-3 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-700 rounded"})]}),e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-700 rounded"})]})]}):e.jsxs("div",{id:"charts-section",className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5 lg:col-span-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",style:{fontFamily:"Inter, sans-serif"},children:"Monthly Trend"})]}),e.jsx("div",{className:"relative w-full",style:{height:"300px"},children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 800 300",preserveAspectRatio:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"adRequestsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0.05"})]}),e.jsxs("linearGradient",{id:"impressionsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:"0.3"}),e.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:"0.05"})]})]}),(()=>{if(!E.length)return null;const t={top:20,right:50,bottom:40,left:50},n=800,s=300,o=n-t.left-t.right,i=s-t.top-t.bottom,r=Math.max(...E.map(a=>a.adRequests)),c=Math.max(...E.map(a=>a.impressions)),d=Math.max(r,c),m=Math.max(...E.map(a=>parseFloat(a.fillRate))),u=E.map((a,p)=>{let h;return E.length===1?h=t.left+o/2:h=t.left+p/(E.length-1)*o,{x:h,yRequests:t.top+i-a.adRequests/d*i,yImpressions:t.top+i-a.impressions/d*i,yFillRate:t.top+i-parseFloat(a.fillRate)/m*i}}),b=a=>{if(a.length===0)return"";if(a.length===1)return`M ${a[0].x} ${a[0].y}`;let p=`M ${a[0].x} ${a[0].y}`;for(let h=0;h<a.length-1;h++){const w=(a[h].x+a[h+1].x)/2,R=(a[h].y+a[h+1].y)/2,f=(w+a[h].x)/2,k=(w+a[h+1].x)/2;p+=` Q ${f} ${a[h].y}, ${w} ${R}`,p+=` Q ${k} ${a[h+1].y}, ${a[h+1].x} ${a[h+1].y}`}return p},N=b(u.map(a=>({x:a.x,y:a.yRequests}))),y=b(u.map(a=>({x:a.x,y:a.yImpressions}))),j=b(u.map(a=>({x:a.x,y:a.yFillRate}))),W=N+` L ${t.left+o} ${t.top+i} L ${t.left} ${t.top+i} Z`,x=y+` L ${t.left+o} ${t.top+i} L ${t.left} ${t.top+i} Z`,g=a=>a>=1e6?(a/1e6).toFixed(0)+"M":a>=1e3?(a/1e3).toFixed(0)+"K":a.toFixed(0);return e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:t.left,y1:t.top,x2:t.left,y2:t.top+i,stroke:"#4B5563",strokeWidth:"1"}),e.jsx("line",{x1:t.left+o,y1:t.top,x2:t.left+o,y2:t.top+i,stroke:"#4B5563",strokeWidth:"1"}),[0,1,2,3,4].map(a=>{const p=t.top+a/4*i,h=d*(1-a/4),w=m*(1-a/4);return e.jsxs("g",{children:[e.jsx("line",{x1:t.left,y1:p,x2:t.left+o,y2:p,stroke:"#374151",strokeWidth:"1",strokeDasharray:"4 4"}),e.jsx("text",{x:t.left-10,y:p+4,textAnchor:"end",fill:"#9CA3AF",fontSize:"10",fontWeight:"500",children:g(h)}),e.jsxs("text",{x:t.left+o+10,y:p+4,textAnchor:"start",fill:"#9CA3AF",fontSize:"10",fontWeight:"500",children:[w.toFixed(0),"%"]})]},a)}),e.jsx("path",{d:W,fill:"url(#adRequestsGradient)"}),e.jsx("path",{d:x,fill:"url(#impressionsGradient)"}),e.jsx("path",{d:N,fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:y,fill:"none",stroke:"#10B981",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:j,fill:"none",stroke:"#FF0080",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"5 5"}),u.map((a,p)=>{var w,R,f;const h=E[p];return e.jsxs("g",{children:[e.jsx("rect",{x:a.x-15,y:t.top,width:30,height:i,fill:"transparent",style:{cursor:"pointer"},onMouseEnter:k=>{const v=k.currentTarget.getBoundingClientRect();le({visible:!0,x:v.left+v.width/2,y:v.top-10,data:{month:h.month,adRequests:h.adRequests,impressions:h.impressions,fillRate:h.fillRate}})},onMouseLeave:()=>{le({visible:!1,x:0,y:0,data:null})}}),e.jsx("circle",{cx:a.x,cy:a.yRequests,r:I.visible&&((w=I.data)==null?void 0:w.month)===h.month?"6":"4",fill:"#3B82F6",stroke:"#0a0a0a",strokeWidth:"2",style:{transition:"r 0.2s",pointerEvents:"none"}}),e.jsx("circle",{cx:a.x,cy:a.yImpressions,r:I.visible&&((R=I.data)==null?void 0:R.month)===h.month?"6":"4",fill:"#10B981",stroke:"#0a0a0a",strokeWidth:"2",style:{transition:"r 0.2s",pointerEvents:"none"}}),e.jsx("circle",{cx:a.x,cy:a.yFillRate,r:I.visible&&((f=I.data)==null?void 0:f.month)===h.month?"5":"3",fill:"#FF0080",stroke:"#0a0a0a",strokeWidth:"2",style:{transition:"r 0.2s",pointerEvents:"none"}}),e.jsx("text",{x:a.x,y:t.top+i+25,textAnchor:"middle",fill:"#9CA3AF",fontSize:"10",fontWeight:"600",style:{pointerEvents:"none"},children:h.month.substring(0,3)})]},p)})]})})()]})}),I.visible&&I.data&&e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:`${I.x}px`,top:`${I.y}px`,transform:"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg shadow-xl p-3 min-w-[200px]",children:[e.jsx("div",{className:"text-white font-bold text-sm mb-2 border-b border-gray-700 pb-2",children:I.data.month}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Ad Requests"})]}),e.jsx("span",{className:"text-xs text-white font-semibold",children:$(I.data.adRequests)})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Impressions"})]}),e.jsx("span",{className:"text-xs text-white font-semibold",children:$(I.data.impressions)})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-500"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Fill Rate"})]}),e.jsxs("span",{className:"text-xs text-white font-semibold",children:[I.data.fillRate,"%"]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-6 pt-4 border-t border-gray-800 flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-0.5 bg-blue-500"}),e.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:"Ad Requests"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-0.5 bg-green-500"}),e.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:"Impressions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-0.5 bg-pink-500",style:{backgroundImage:"repeating-linear-gradient(90deg, #FF0080 0, #FF0080 3px, transparent 3px, transparent 6px)"}}),e.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:"Fill Rate"})]})]})]}),e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg p-5 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",style:{fontFamily:"Inter, sans-serif"},children:"Device Breakdown"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-6",children:[e.jsx("div",{className:"relative mx-auto",style:{width:"200px",height:"200px"},children:e.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:[(()=>{const t=Z.reduce((c,d)=>c+d.adRequests,0);let n=0;const s=100,o=100,i=80,r=50;return Z.map((c,d)=>{const m=t>0?c.adRequests/t*100:0;let u=m/100*360;u>=360&&(u=359.99);const b=n,N=n+u;n=N;const y=(b-90)*(Math.PI/180),j=(N-90)*(Math.PI/180),W=s+i*Math.cos(y),x=o+i*Math.sin(y),g=s+i*Math.cos(j),a=o+i*Math.sin(j),p=s+r*Math.cos(j),h=o+r*Math.sin(j),w=s+r*Math.cos(y),R=o+r*Math.sin(y),f=u>180?1:0,k=`
                          M ${W} ${x}
                          A ${i} ${i} 0 ${f} 1 ${g} ${a}
                          L ${p} ${h}
                          A ${r} ${r} 0 ${f} 0 ${w} ${R}
                          Z
                        `;return e.jsx("path",{d:k,fill:V[d%V.length],stroke:"#0a0a0a",strokeWidth:"2",className:"hover:opacity-80 transition-opacity cursor-pointer",onMouseEnter:v=>{const J=v.currentTarget.getBoundingClientRect();ie({visible:!0,x:J.left+J.width/2,y:J.top+J.height/2,data:{device:c.device,adRequests:c.adRequests,impressions:c.impressions,percentage:m.toFixed(1),color:V[d%V.length]}})},onMouseLeave:()=>{ie({visible:!1,x:0,y:0,data:null})}},d)})})(),e.jsx("circle",{cx:"100",cy:"100",r:"45",fill:"#0a0a0a",stroke:"#1f2937",strokeWidth:"2"}),e.jsx("text",{x:"100",y:"95",textAnchor:"middle",fill:"#9CA3AF",fontSize:"12",fontWeight:"600",children:"Avg. Monthly"}),e.jsx("text",{x:"100",y:"110",textAnchor:"middle",fill:"#FFFFFF",fontSize:"16",fontWeight:"700",children:$(T.avgAdRequests)})]})}),D.visible&&D.data&&e.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:`${D.x}px`,top:`${D.y}px`,transform:"translate(-50%, -50%)"},children:e.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg shadow-xl p-3 min-w-[180px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-700",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D.data.color}}),e.jsx("div",{className:"text-white font-bold text-sm",children:D.data.device})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Percentage"}),e.jsxs("span",{className:"text-xs text-white font-semibold",children:[D.data.percentage,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Ad Requests"}),e.jsx("span",{className:"text-xs text-white font-semibold",children:$(D.data.adRequests)})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Impressions"}),e.jsx("span",{className:"text-xs text-white font-semibold",children:$(D.data.impressions)})]})]})]})}),e.jsx("div",{className:"w-full space-y-2",children:Z.map((t,n)=>{const s=Z.reduce((i,r)=>i+r.adRequests,0),o=s>0?(t.adRequests/s*100).toFixed(1):0;return e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:V[n%V.length]}}),e.jsx("span",{className:"text-gray-300 font-semibold text-xs truncate",children:t.device})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("div",{className:"text-white font-bold text-xs",children:[o,"%"]})})]},n)})})]})]})]}),e.jsxs("div",{className:"bg-[#0d1117] border border-gray-800 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",style:{fontFamily:"Inter, sans-serif"},children:"Detailed Inventory"})]}),e.jsxs("div",{className:"flex items-center gap-4 pr-6",children:[e.jsxs("button",{onClick:we,className:"group relative",title:"Export to Excel (CSV)",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-400 hover:text-green-400 transition-colors cursor-pointer",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("span",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-900 border border-gray-700 text-white text-xs px-3 py-1.5 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50",children:"Excel (CSV)"})]}),e.jsxs("button",{onClick:Ne,className:"group relative",title:"Export to PDF (Full Report)",children:[e.jsxs("svg",{className:"w-6 h-6 text-gray-400 hover:text-red-400 transition-colors cursor-pointer",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6"})]}),e.jsx("span",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-900 border border-gray-700 text-white text-xs px-3 py-1.5 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50",children:"PDF Report"})]})]})]})}),me?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Loading table data..."})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0a0a0a] border-b border-gray-800",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider cursor-pointer hover:text-cyan-400 transition-colors",style:{fontFamily:"Inter, sans-serif"},onClick:()=>H({key:"ip",direction:L.key==="ip"&&L.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center gap-1",children:["IP",e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-400 uppercase tracking-wider cursor-pointer hover:text-cyan-400 transition-colors",style:{fontFamily:"Inter, sans-serif"},onClick:()=>H({key:"device",direction:L.key==="device"&&L.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Device",e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-400 uppercase tracking-wider cursor-pointer hover:text-cyan-400 transition-colors",style:{fontFamily:"Inter, sans-serif"},onClick:()=>H({key:"avgAdRequests",direction:L.key==="avgAdRequests"&&L.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Avg. Monthly Ad Requests",e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-400 uppercase tracking-wider cursor-pointer hover:text-cyan-400 transition-colors",style:{fontFamily:"Inter, sans-serif"},onClick:()=>H({key:"avgImpressions",direction:L.key==="avgImpressions"&&L.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Avg. Monthly Imp. Served",e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-400 uppercase tracking-wider cursor-pointer hover:text-cyan-400 transition-colors",style:{fontFamily:"Inter, sans-serif"},onClick:()=>H({key:"fillRate",direction:L.key==="fillRate"&&L.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Fill Rate",e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),e.jsx("tbody",{children:(()=>{const t={};C.forEach(r=>{const c=`${r.IP||"Unknown"}-${r["Device category"]||"Unknown"}`;t[c]||(t[c]={ip:r.IP||"Unknown",device:r["Device category"]||"Unknown",monthlyData:{}});const d=r["Month and year"]||"Unknown";t[c].monthlyData[d]||(t[c].monthlyData[d]={adRequests:0,impressions:0}),t[c].monthlyData[d].adRequests+=r["Total ad requests"]||0,t[c].monthlyData[d].impressions+=r["Total impressions"]||0});const n=Object.values(t).map(r=>{const c=Object.values(r.monthlyData);if(c.length===0)return{ip:r.ip,device:r.device,avgAdRequests:0,avgImpressions:0,fillRate:0};const d=Math.min(...c.map(y=>y.adRequests)),m=Math.min(...c.map(y=>y.impressions)),u=c.reduce((y,j)=>y+j.adRequests,0),b=c.reduce((y,j)=>y+j.impressions,0),N=u>0?(b/u*100).toFixed(1):0;return{ip:r.ip,device:r.device,avgAdRequests:Math.round(d),avgImpressions:Math.round(m),fillRate:N}});n.sort((r,c)=>{const{key:d,direction:m}=L;let u=r[d],b=c[d];return d==="avgAdRequests"||d==="avgImpressions"||d==="fillRate"?(u=parseFloat(u),b=parseFloat(b),m==="asc"?u-b:b-u):m==="asc"?u.localeCompare(b):b.localeCompare(u)}),n.length;const s=(P-1)*_,o=s+_;return n.slice(s,o).map((r,c)=>{const d=parseFloat(r.fillRate);let m;return d>=67?m="#10B981":d>=34?m="#F97316":m="#EF4444",e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-[#0f1419] transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-white font-medium",style:{fontFamily:"Inter, sans-serif"},children:r.ip}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-300",style:{fontFamily:"Inter, sans-serif"},children:r.device}),e.jsx("td",{className:"px-6 py-4 text-sm text-center font-semibold text-white",style:{fontFamily:"Inter, sans-serif"},children:r.avgAdRequests.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-sm text-center font-semibold text-white",style:{fontFamily:"Inter, sans-serif"},children:r.avgImpressions.toLocaleString()}),e.jsxs("td",{className:"px-6 py-4 text-sm text-center font-semibold",style:{fontFamily:"Inter, sans-serif",color:m},children:[r.fillRate,"%"]})]},c)})})()})]}),C.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("p",{className:"font-semibold",children:"No data available"}),e.jsx("p",{className:"text-sm mt-1",children:"Apply filters to view inventory details"})]}),C.length>0&&(()=>{const t={};C.forEach(r=>{const c=`${r.IP||"Unknown"}-${r["Device category"]||"Unknown"}`;t[c]||(t[c]={ip:r.IP,device:r["Device category"],monthlyData:{}})});const n=Object.keys(t).length,s=Math.ceil(n/_),o=(P-1)*_+1,i=Math.min(P*_,n);return e.jsxs("div",{className:"px-6 py-4 border-t border-gray-800 flex flex-col sm:flex-row items-center justify-between gap-4 bg-[#0a0a0a]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("span",{children:"Rows per page:"}),e.jsxs("select",{value:_,onChange:r=>{fe(Number(r.target.value)),O(1)},className:"bg-[#0d1117] border border-gray-700 rounded px-2 py-1 text-white focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{className:"ml-4",children:[o,"-",i," of ",n]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(1),disabled:P===1,className:"px-3 py-1 rounded bg-[#0d1117] border border-gray-700 text-gray-400 hover:bg-gray-800 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),e.jsx("button",{onClick:()=>O(r=>Math.max(1,r-1)),disabled:P===1,className:"px-3 py-1 rounded bg-[#0d1117] border border-gray-700 text-gray-400 hover:bg-gray-800 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-400",children:["Page ",P," of ",s]}),e.jsx("button",{onClick:()=>O(r=>Math.min(s,r+1)),disabled:P===s,className:"px-3 py-1 rounded bg-[#0d1117] border border-gray-700 text-gray-400 hover:bg-gray-800 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:()=>O(s),disabled:P===s,className:"px-3 py-1 rounded bg-[#0d1117] border border-gray-700 text-gray-400 hover:bg-gray-800 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})})()]})]})]})]})})}export{qe as default};
