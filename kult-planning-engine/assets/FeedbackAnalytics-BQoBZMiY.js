import{j as e}from"./index-C1JaId44.js";import{r as l}from"./vendor-7lAwbL4C.js";import{a as L}from"./utils-B9ygI19o.js";import{L as T}from"./Layout-BIIFe71_.js";const D=({message:n="Loading..."})=>e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-800"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-cyan-400 animate-spin"})]}),e.jsx("div",{className:"text-gray-400 text-base",children:n})]})});/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,t,c)=>c?c.toUpperCase():t.toLowerCase()),A=n=>{const i=U(n);return i.charAt(0).toUpperCase()+i.slice(1)},I=(...n)=>n.filter((i,t,c)=>!!i&&i.trim()!==""&&c.indexOf(i)===t).join(" ").trim(),q=n=>{for(const i in n)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var B={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=l.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:t=2,absoluteStrokeWidth:c,className:h="",children:x,iconNode:v,...b},f)=>l.createElement("svg",{ref:f,...B,width:i,height:i,stroke:n,strokeWidth:c?Number(t)*24/Number(i):t,className:I("lucide",h),...!x&&!q(b)&&{"aria-hidden":"true"},...b},[...v.map(([k,g])=>l.createElement(k,g)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=(n,i)=>{const t=l.forwardRef(({className:c,...h},x)=>l.createElement(H,{ref:x,iconNode:i,className:I(`lucide-${P(A(n))}`,`lucide-${n}`,c),...h}));return t.displayName=A(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],K=p("eye-off",Z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],W=p("eye",V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],u=p("flag",J);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],C=p("refresh-cw",Y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],y=p("thumbs-down",G);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],N=p("thumbs-up",Q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ee=p("trending-up",X);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],te=p("triangle-alert",se),F="https://kult-planning-test-production.up.railway.app",de=()=>{const[n,i]=l.useState(!0),[t,c]=l.useState(null),[h,x]=l.useState([]),[v,b]=l.useState([]),[f,k]=l.useState(7),[g,O]=l.useState(!1),[w,S]=l.useState([]);l.useEffect(()=>{$()},[f]);const $=async()=>{i(!0);try{const s=await L.get(`${F}/api/ai-chat/learning-dashboard`);if(s.data&&s.data.stats){const{stats:a,recentFeedback:d}=s.data,o={},m={};let R=0;d.forEach(r=>{r.feedbackType==="regenerate"&&R++,r.objective&&(o[r.objective]||(o[r.objective]={total:0,likes:0,dislikes:0}),o[r.objective].total++,r.feedbackType==="like"&&o[r.objective].likes++,(r.feedbackType==="dislike"||r.feedbackType==="report")&&o[r.objective].dislikes++),r.industry&&(m[r.industry]||(m[r.industry]={total:0,likes:0,dislikes:0}),m[r.industry].total++,r.feedbackType==="like"&&m[r.industry].likes++,(r.feedbackType==="dislike"||r.feedbackType==="report")&&m[r.industry].dislikes++)}),c({totalFeedback:a.totalFeedback||0,likes:a.likes||0,dislikes:a.dislikes||0,likeRate:parseFloat(a.satisfactionRate)||0,reports:a.reports||0,regenerations:R,byObjective:o,byIndustry:m,topIndustries:a.topIndustries||{},topObjectives:a.topObjectives||{},reportReasons:a.reportReasons||{}});const M=d.filter(r=>r.feedbackType==="dislike"||r.feedbackType==="report").slice(0,10);x(M),S(d);const j=[];if(a.dislikes>a.likes&&j.push({type:"warning",priority:"high",message:"Dislikes exceed likes - review response quality",action:"Review recent disliked responses and identify patterns"}),a.reports>0&&a.reportReasons){const r=Object.entries(a.reportReasons).sort((_,E)=>E[1]-_[1])[0];r&&j.push({type:"action",priority:"high",message:`Most common report: "${r[0]}"`,action:"Investigate and improve this specific issue"})}parseFloat(a.satisfactionRate)<50&&j.push({type:"critical",priority:"high",message:"Satisfaction rate below 50% - immediate attention needed",action:"Review AI prompts and response quality immediately"}),parseFloat(a.satisfactionRate)===0&&a.totalFeedback===0&&j.push({type:"info",priority:"low",message:"No feedback data yet",action:"Encourage users to provide feedback on AI responses"}),b(j)}}catch(s){console.error("Error loading analytics:",s),c({totalFeedback:0,likes:0,dislikes:0,likeRate:0,reports:0,byObjective:{},byIndustry:{},topIndustries:{},topObjectives:{},reportReasons:{}}),x([]),b([{type:"error",priority:"medium",message:"Failed to load analytics data",action:"Check backend connection and try again"}])}finally{i(!1)}},z=async()=>{try{const s=await L.get(`${F}/api/ai-chat/learning-dashboard`),a=new Blob([JSON.stringify(s.data,null,2)],{type:"application/json"}),d=window.URL.createObjectURL(a),o=document.createElement("a");o.href=d,o.download=`ai-chat-feedback-report-${new Date().toISOString().split("T")[0]}.json`,o.click()}catch(s){console.error("Error downloading report:",s),alert("Failed to download report")}};return n?e.jsx(T,{children:e.jsx(D,{message:"Loading analytics..."})}):e.jsx(T,{children:e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:[e.jsx("div",{className:"border-b border-gray-800 bg-[#0f0f0f] px-8 py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-cyan-400 font-black mb-2 tracking-wider uppercase",children:"[ AI FEEDBACK ANALYTICS ]"}),e.jsx("h1",{className:"text-3xl font-black text-white uppercase",children:"Self-Learning Dashboard"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Track AI performance and identify improvement areas"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:f,onChange:s=>k(parseInt(s.target.value)),className:"px-4 py-2 bg-gray-800 text-white rounded-lg border border-gray-700",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:14,children:"Last 14 days"}),e.jsx("option",{value:30,children:"Last 30 days"})]}),e.jsx("button",{onClick:z,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-700 text-white font-medium rounded-lg transition-colors",children:"Download Report"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(ee,{size:16}),"Total Feedback"]}),e.jsx("div",{className:"text-3xl font-bold text-white",children:(t==null?void 0:t.totalFeedback)||0})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(N,{size:16}),"Likes"]}),e.jsx("div",{className:"text-3xl font-bold text-green-500",children:(t==null?void 0:t.likes)||0})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(y,{size:16}),"Dislikes"]}),e.jsx("div",{className:"text-3xl font-bold text-red-500",children:(t==null?void 0:t.dislikes)||0})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center gap-2",children:[e.jsx(C,{size:16}),"Regenerations"]}),e.jsx("div",{className:"text-3xl font-bold text-orange-500",children:(t==null?void 0:t.regenerations)||0})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6",children:[e.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Like Rate"}),e.jsxs("div",{className:`text-3xl font-bold ${(t==null?void 0:t.likeRate)>=70?"text-green-500":(t==null?void 0:t.likeRate)>=50?"text-yellow-500":"text-red-500"}`,children:[(t==null?void 0:t.likeRate)||0,"%"]})]})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Performance by Objective"}),e.jsx("div",{className:"space-y-4",children:Object.keys((t==null?void 0:t.byObjective)||{}).length===0?e.jsx("div",{className:"text-gray-500 text-center py-4",children:"No data available"}):Object.keys(t.byObjective).map(s=>{const a=t.byObjective[s],d=(a.likes/a.total*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium",children:s}),e.jsxs("div",{className:"text-sm text-gray-400",children:[a.total," responses"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-green-500 text-sm flex items-center gap-1",children:[e.jsx(N,{size:14}),a.likes]}),e.jsxs("div",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(y,{size:14}),a.dislikes]}),e.jsxs("div",{className:`text-lg font-bold ${d>=70?"text-green-500":d>=50?"text-yellow-500":"text-red-500"}`,children:[d,"%"]})]})]},s)})})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Performance by Industry"}),e.jsx("div",{className:"space-y-4",children:Object.keys((t==null?void 0:t.byIndustry)||{}).length===0?e.jsx("div",{className:"text-gray-500 text-center py-4",children:"No data available"}):Object.keys(t.byIndustry).map(s=>{const a=t.byIndustry[s],d=(a.likes/a.total*100).toFixed(1);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium",children:s}),e.jsxs("div",{className:"text-sm text-gray-400",children:[a.total," responses"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-green-500 text-sm flex items-center gap-1",children:[e.jsx(N,{size:14}),a.likes]}),e.jsxs("div",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(y,{size:14}),a.dislikes]}),e.jsxs("div",{className:`text-lg font-bold ${d>=70?"text-green-500":d>=50?"text-yellow-500":"text-red-500"}`,children:[d,"%"]})]})]},s)})})]}),(t==null?void 0:t.reportReasons)&&Object.keys(t.reportReasons).length>0&&e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6 mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(u,{size:20,className:"text-orange-500"}),"Top Report Reasons"]}),e.jsx("div",{className:"space-y-4",children:Object.entries(t.reportReasons).sort((s,a)=>a[1]-s[1]).map(([s,a])=>{const d=(a/(t.reports||1)*100).toFixed(1);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-medium",children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-gray-400 text-sm",children:[a," reports"]}),e.jsxs("span",{className:"text-orange-400 font-bold",children:[d,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 h-3 rounded-full transition-all duration-500",style:{width:`${d}%`}})})]},s)})})]}),v.length>0&&e.jsxs("div",{className:"bg-[#1a1a1a] border border-red-800 rounded-lg p-6 mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-red-400 mb-4 flex items-center gap-2",children:[e.jsx(te,{size:20}),"Improvement Suggestions"]}),e.jsx("div",{className:"space-y-4",children:v.map((s,a)=>e.jsx("div",{className:"border-l-4 border-red-500 pl-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded ${s.priority==="high"?"bg-red-600 text-white":s.priority==="medium"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:s.priority.toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium",children:s.message}),e.jsx("div",{className:"text-gray-400 text-sm mt-1",children:s.action})]})]})},a))})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Feedback Logs"}),e.jsx("button",{onClick:()=>O(!g),className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white text-sm rounded-lg transition-colors flex items-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(K,{size:16}),"Hide Logs"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:16}),"View All Logs"]})})]}),g&&e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:w.length===0?e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No feedback logs available"}):w.map((s,a)=>e.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 hover:border-gray-600 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-bold rounded flex items-center gap-1 ${s.feedbackType==="like"?"bg-green-600 text-white":s.feedbackType==="dislike"?"bg-red-600 text-white":s.feedbackType==="report"?"bg-orange-600 text-white":"bg-purple-600 text-white"}`,children:[s.feedbackType==="like"&&e.jsx(N,{size:12}),s.feedbackType==="dislike"&&e.jsx(y,{size:12}),s.feedbackType==="report"&&e.jsx(u,{size:12}),s.feedbackType==="regenerate"&&e.jsx(C,{size:12}),s.feedbackType.toUpperCase()]}),s.reportReason&&e.jsxs("span",{className:"text-xs text-orange-400",children:["Reason: ",s.reportReason]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Industry:"})," ",e.jsx("span",{className:"text-white",children:s.industry||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Objective:"})," ",e.jsx("span",{className:"text-white",children:s.objective||"N/A"})]})]}),s.messagePreview&&e.jsxs("div",{className:"bg-gray-900 rounded p-3 text-sm text-gray-300",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Message Preview:"}),e.jsx("div",{className:"line-clamp-3",children:s.messagePreview})]})]},a))})]}),h.length>0&&e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Recent Disliked Messages"}),e.jsx("div",{className:"space-y-4",children:h.map((s,a)=>e.jsxs("div",{className:"border border-gray-700 rounded p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded flex items-center gap-1 ${s.feedbackType==="report"?"bg-orange-600 text-white":"bg-red-600 text-white"}`,children:s.feedbackType==="report"?e.jsxs(e.Fragment,{children:[e.jsx(u,{size:12}),"REPORT"]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{size:12}),"DISLIKE"]})}),e.jsxs("span",{className:"text-sm text-gray-400",children:[s.industry," • ",s.objective]}),s.reportReason&&e.jsxs("span",{className:"text-xs text-orange-400",children:["• ",s.reportReason]})]}),e.jsx("div",{className:"text-white text-sm bg-gray-900 rounded p-3 mt-2",children:s.messagePreview}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:new Date(s.timestamp).toLocaleString()})]},a))})]})]})]})})};export{de as default};
