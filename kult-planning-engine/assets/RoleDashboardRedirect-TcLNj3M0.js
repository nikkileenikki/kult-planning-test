import{j as a}from"./index-C1JaId44.js";import{d,r as t}from"./vendor-7lAwbL4C.js";import{a as m}from"./utils-B9ygI19o.js";function x(){const e=d(),[o,i]=t.useState(null),[l,u]=t.useState(!0),r=t.useRef(!1);return t.useEffect(()=>{if(r.current)return;(async()=>{const s=localStorage.getItem("token");if(!s){r.current=!0,e("/login",{replace:!0});return}try{const c=(await m.get("/api/auth/me",{headers:{Authorization:`Bearer ${s}`}})).data.user;switch(i(c),r.current=!0,c.role){case"system_admin":e("/campaigns",{replace:!0});break;case"sales_person":e("/dashboard/sales",{replace:!0});break;case"client_admin":e("/dashboard/client-admin",{replace:!0});break;case"client_user":e("/dashboard/team-member",{replace:!0});break;default:e("/campaigns",{replace:!0})}}catch(n){console.error("Failed to load user:",n),localStorage.removeItem("token"),r.current=!0,e("/login",{replace:!0})}finally{u(!1)}})()},[]),l||!o?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-400",children:"Redirecting..."})]})}):null}export{x as default};
